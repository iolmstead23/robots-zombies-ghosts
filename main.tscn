[gd_scene load_steps=11 format=4 uid="uid://c0ainp474es8e"]

[ext_resource type="PackedScene" uid="uid://xmepjh2dfuwk" path="res://Robot/Agent.tscn" id="1_0xm2m"]
[ext_resource type="Script" uid="uid://de0cnd67yj7gq" path="res://main.gd" id="1_4c57u"]
[ext_resource type="PackedScene" uid="uid://c0ajtsn61q85p" path="res://Environment/Terrain/Dirt/dirt.tscn" id="2_h2yge"]
[ext_resource type="PackedScene" uid="uid://bhvhc1f11qh4e" path="res://Environment/Terrain/Stone/stone.tscn" id="3_1bvp3"]
[ext_resource type="Texture2D" uid="uid://dq3cucr1dt6m3" path="res://Environment/Walls/Stone/stone_wall.png" id="5_lquwl"]
[ext_resource type="PackedScene" uid="uid://bmdgbb7lsxnxm" path="res://Environment/Dungeon Objects/Breakable/barrels.tscn" id="6_5vw27"]
[ext_resource type="Script" uid="uid://8xlw2qfjncsq" path="res://Controllers/SessionController/Core/session_controller.gd" id="7_272bh"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_lquwl"]
vertices = PackedVector2Array(580.9375, -646.28906, 668, -689.8203, 1396.1563, -326.71094, 602.1406, -369.4297, 575.96875, -399.52344, 445.0703, -561.3672, 533.3672, -404.1328, 492.4297, -394.4297, 317.0703, -497.3672, 437.53125, -572.65625, -322.9375, -177.36719, -202.45313, -252.65625, -194.9375, -241.36719, -74.453125, -316.65625, -66.9375, -305.3672, 61.070313, -369.3672, 181.53125, -444.65625, 189.07031, -433.3672, 407.90625, 198.71875, 309.53125, -508.65625, 412.9297, -323.92188, 409.9297, 51.078125, 430.35156, -361.25, 53.53125, -380.65625, -340.89063, -184.90625, -331.20313, -189.77344, 589.77344, -327.39063, 762.96875, -292.52344, 720.3672, -297.1328, 776.77344, -220.39063, 599.1406, 5.5703125, 572.96875, -24.523438, 750.0625, -197.02344, 789.1406, -262.4297, 718.8125, -176.53906, 661.5703, -165.74219, 618.96875, -177.57031, 530.3672, -29.132813, 531.8125, -283.53906, 599.9297, -216.92188, 489.4297, -19.429688, 474.5703, -272.7422, 679.4297, -287.4297, 617.35156, -254.25, 563.0625, -304.02344, 431.96875, -284.5703, 427.35156, 13.75, 586.77344, 47.609375, 428.96875, 90.42969, 471.5703, 102.25781, 528.8125, 91.46094, 560.0625, 70.97656)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5), PackedInt32Array(5, 4, 6), PackedInt32Array(5, 6, 7, 8, 9), PackedInt32Array(10, 11, 12), PackedInt32Array(12, 13, 14), PackedInt32Array(15, 16, 17, 18), PackedInt32Array(18, 17, 19, 8, 20, 21), PackedInt32Array(8, 7, 22), PackedInt32Array(14, 23, 15, 18), PackedInt32Array(24, 25, 10), PackedInt32Array(18, 24, 10), PackedInt32Array(18, 10, 12), PackedInt32Array(18, 12, 14), PackedInt32Array(26, 3, 2, 27, 28), PackedInt32Array(29, 2, 30, 31, 32), PackedInt32Array(29, 33, 2), PackedInt32Array(34, 32, 31), PackedInt32Array(35, 34, 31), PackedInt32Array(36, 35, 31, 37), PackedInt32Array(8, 22, 20), PackedInt32Array(38, 39, 36, 37, 40, 41), PackedInt32Array(2, 33, 27), PackedInt32Array(26, 28, 42), PackedInt32Array(26, 42, 43, 44), PackedInt32Array(38, 44, 43, 39), PackedInt32Array(45, 41, 40, 46), PackedInt32Array(47, 30, 2), PackedInt32Array(20, 45, 46, 21), PackedInt32Array(18, 21, 48), PackedInt32Array(18, 48, 49), PackedInt32Array(18, 49, 50), PackedInt32Array(2, 18, 50, 51), PackedInt32Array(2, 51, 47)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-363, -185, 408, 210, 1418, -327, 666, -702)])

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_7mycd"]
texture = ExtResource("5_lquwl")
texture_region_size = Vector2i(256, 512)
3:0/0 = 0
3:0/0/y_sort_origin = 150
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-96, 208, 0, 160, 96, 208, 128, 192, 0, 112, -128, 176)
4:0/0 = 0
4:0/0/y_sort_origin = 180
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, 224, 0, 256, 128, 192, 12.200806, 105.90323, -32, 128, 48, 176)
5:0/0 = 0
5:0/0/y_sort_origin = 150
5:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-96, 224, 32, 144, 0, 96, -128, 176)
6:0/0 = 0
6:0/0/y_sort_origin = 190
6:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(0, 256, 48, 224, -96, 160, -128, 192)
0:0/0 = 0
0:0/0/y_sort_origin = 190
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, 208, 0, 256, 128, 192, 96, 144)
1:0/0 = 0
1:0/0/y_sort_origin = 180
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-128, 192, -18.149963, 261.76337, 32, 240, -48, 192, 32, 128, 0, 96)
2:0/0 = 0
2:0/0/y_sort_origin = 190
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-128, 192, 0.4880371, 256, 128, 192, 128, 128, 0, 192, -128, 128)
7:0/0 = 0
7:0/0/y_sort_origin = 150
7:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, 144, 96, 208, 128, 192, 0, 112)

[sub_resource type="TileSet" id="TileSet_272bh"]
tile_size = Vector2i(64, 64)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_7mycd")

[node name="Node2D" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_4c57u")

[node name="Ground" type="CanvasGroup" parent="."]
y_sort_enabled = true

[node name="Dirt" parent="Ground" instance=ExtResource("2_h2yge")]
tile_map_data = PackedByteArray("AAAgAN3/AAAAAAEAAAAkAOH/AAABAAEAAAAoAOX/AAABAAEAAAAsAOn/AAABAAEAAAAcANn/AAABAAEAAAAYANX/AAABAAEAAAAUANH/AAABAAEAAAAQANX/AAABAAEAAAAUANn/AAABAAEAAAAYAN3/AAABAAEAAAAcAOH/AAABAAEAAAAgAOX/AAABAAEAAAAkAOn/AAABAAEAAAAoAO3/AAABAAEAAAAkAPH/AAABAAEAAAAgAO3/AAABAAEAAAAcAOn/AAABAAEAAAAYAOX/AAABAAEAAAAUAOH/AAABAAEAAAAQAN3/AAABAAEAAAAMANn/AAABAAEAAAAIAN3/AAABAAEAAAAMAOH/AAABAAEAAAAQAOX/AAABAAEAAAAUAOn/AAABAAEAAAAgAPX/AAABAAEAAAAcAPH/AAABAAEAAAAYAO3/AAABAAEAAAAcAPn/AAABAAEAAAAYAPX/AAABAAEAAAAUAPH/AAABAAEAAAAQAO3/AAABAAEAAAAMAOn/AAABAAEAAAAIAOX/AAABAAEAAAAEAOH/AAABAAEAAAAAAOX/AAABAAEAAAAEAOn/AAABAAEAAAAYAP3/AAABAAEAAAAUAPn/AAABAAEAAAAQAPX/AAABAAEAAAAMAPH/AAABAAEAAAAIAO3/AAABAAEAAAAUAAEAAAABAAEAAAAQAP3/AAABAAEAAAAMAPn/AAABAAEAAAAIAPX/AAABAAEAAAAEAPH/AAABAAEAAAAAAO3/AAABAAEAAAD8/+n/AAABAAEAAAD4/+3/AAABAAEAAAD8//H/AAABAAEAAAAAAPX/AAABAAEAAAAEAPn/AAABAAEAAAAIAP3/AAABAAEAAAAMAAEAAAABAAEAAAAQAAUAAAABAAEAAAD0//H/AAABAAEAAAD4//X/AAABAAEAAAD8//n/AAABAAEAAAAAAP3/AAABAAEAAAAEAAEAAAABAAEAAAAIAAUAAAABAAEAAAAMAAkAAAABAAEAAAA=")

[node name="Stone" parent="Ground" instance=ExtResource("3_1bvp3")]
tile_map_data = PackedByteArray("AAAAAPz/AAABAAEAAAABAP3/AAABAAEAAAACAPz/AAABAAEAAAABAPv/AAABAAEAAAADAP3/AAABAAEAAAAEAP7/AAABAAEAAAACAPr/AAABAAEAAAAFAP3/AAABAAEAAAAEAPz/AAADAAEAAAADAPn/AAADAAEAAAAGAPz/AAADAAEAAAAFAPv/AAACAAEAAAAEAPr/AAACAAEAAAADAPv/AAACAAEAAAAHAPv/AAADAAEAAAAIAPz/AAADAAEAAAAHAP3/AAADAAEAAAAFAP//AAABAAEAAAAGAP7/AAABAAEAAAAGAAAAAAABAAEAAAAHAP//AAABAAEAAAAIAP7/AAABAAEAAAAJAP3/AAABAAEAAAAKAPz/AAADAAEAAAAJAPv/AAADAAEAAAAIAPr/AAADAAEAAAAGAPr/AAABAAEAAAAEAPj/AAABAAEAAAD///v/AAADAAEAAAABAPn/AAADAAEAAAAAAPr/AAADAAEAAAACAPj/AAABAAEAAAADAPf/AAABAAEAAAAFAPn/AAABAAEAAAAEAPb/AAADAAEAAAAHAPn/AAADAAEAAAAFAPf/AAADAAEAAAAGAPj/AAABAAEAAAA=")

[node name="Camera2D" type="Camera2D" parent="."]
y_sort_enabled = true
position = Vector2(144, -180)
drag_horizontal_enabled = true

[node name="SessionController" type="Node" parent="." node_paths=PackedStringArray("navigation_region")]
script = ExtResource("7_272bh")
grid_width = 80
grid_height = 35
hex_size = 16.0
navigation_region = NodePath("../NavigationRegion2D")
debug_mode = true

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
y_sort_enabled = true
navigation_polygon = SubResource("NavigationPolygon_lquwl")

[node name="Test Barrels 1" parent="NavigationRegion2D" instance=ExtResource("6_5vw27")]
position = Vector2(320, -400)

[node name="Test Barrels 2" parent="NavigationRegion2D" instance=ExtResource("6_5vw27")]
position = Vector2(133, -507)
object_name = "Barrel 2"

[node name="Test Barrels 3" parent="NavigationRegion2D" instance=ExtResource("6_5vw27")]
position = Vector2(130, -132)
object_name = "Barrel 3"

[node name="Walls" type="CanvasGroup" parent="NavigationRegion2D"]
y_sort_enabled = true

[node name="StoneWall" type="TileMapLayer" parent="NavigationRegion2D/Walls"]
y_sort_enabled = true
position = Vector2(0, 1)
tile_map_data = PackedByteArray("AAD6//r/AAABAAAAAAD8//n/AAAFAAAAAAD+//j/AAAFAAAAAAAAAPf/AAAFAAAAAAACAPb/AAAFAAAAAAAEAPX/AAAFAAAAAAAGAPT/AAAFAAAAAAAIAPP/AAAFAAAAAAAKAPL/AAADAAAAAAAMAPP/AAAHAAAAAAAOAPT/AAAHAAAAAAAQAPX/AAAHAAAAAAASAPb/AAAHAAAAAAAUAPf/AAAHAAAAAAAWAPj/AAAEAAAAAAAUAPn/AAAAAAAAAAASAPr/AAAAAAAAAAAQAPv/AAAAAAAAAAAOAPz/AAAAAAAAAAAMAP3/AAAAAAAAAAAKAP7/AAAAAAAAAAAIAP//AAAAAAAAAAAGAAAAAAACAAAAAAAEAP//AAAGAAAAAAACAP7/AAAGAAAAAAAAAP3/AAAGAAAAAAD+//z/AAAGAAAAAAD8//v/AAAGAAAAAAA=")
tile_set = SubResource("TileSet_272bh")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="NavigationRegion2D/Walls"]

[node name="CharacterBody2D" parent="." instance=ExtResource("1_0xm2m")]
position = Vector2(331, -265)
